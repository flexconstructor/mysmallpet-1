!function(e){"use strict";var t,n=BX.message("SERVER_TIME");e.fn.timer=function(t){t=e.extend({days:".js_timer-d",hours:".js_timer-H",minute:".js_timer-i",second:".js_timer-s",blockTime:".timer__item",linePercent:".progress_bar",textLinePercent:".progress_text",destroy:!1},t);var n=this;return!(e(this).length<1)&&e.timer.count(n,t)},jQuery.extend({timer:{count:function(i,r){t||(n=parseInt(n)+1,setInterval(function(){n=parseInt(n)+1},1e3),t=!0),e(i).not(".runTimer").each(function(){var t=e(this),n=t.data("timer");"object"!=typeof n&&(n=BX.parseJSON(n)),e.timer.runTimer(t,r,n),setInterval(function(){e.timer.runTimer(t,r,n)},1e3),e(t).addClass("runTimer")})},runTimer:function(t,i,r){var s=t,a=r,d=a.DATE_TO-a.DATE_FROM,o=a.DATE_TO-n;if(o<1&&"Y"==a.AUTO_RENEWAL)for(var c=0;c<200;c++){var f=c*d+a.DATE_TO-n;if(f>0){o=f;break}}if(o>0){var A=parseInt(o/3600/24);A<10&&(A="0"+A),A=A.toString();var l=parseInt(o/3600),m=parseInt(o/3600%24);m<10&&(m="0"+m),m=m.toString();var T=parseInt(o/60)%60;T<10&&(T="0"+T),T=T.toString();var I=parseInt(o)%60;I<10&&(I="0"+I),I=I.toString();var u=!1;if(a.DINAMICA_DATA)if("evenly"==a.DINAMICA_DATA)u=Math.floor(100-o/d*100),s.find(i.linePercent).css("width",u+"%"),s.find(i.textLinePercent).text(u);else{var _=!1,v=!1;for(var h in a.DINAMICA_DATA){if(_||(_=h,v=h),_<l&&l<h){u=a.DINAMICA_DATA[h];break}_=h}u||(l>_?u=a.DINAMICA_DATA[_]:l<_&&(u=a.DINAMICA_DATA[v])),u&&(s.find(i.linePercent).css("width",u+"%"),s.find(i.textLinePercent).text(u))}else u=Math.floor(o/d*100),s.find(i.linePercent).css("width",u+"%"),s.find(i.textLinePercent).text(u);parseInt(A)<1&&!e(i.days).hasClass("is-hidden")?(s.find(i.days).closest(i.blockTime).addClass("is-hidden"),s.find(i.second).closest(i.blockTime).removeClass("is-hidden")):parseInt(A)>0&&e(i.second).is(":visible")&&(s.find(i.days).closest(i.blockTime).removeClass("is-hidden"),s.find(i.second).closest(i.blockTime).addClass("is-hidden")),s.find(i.second).text(I),s.find(i.minute).text(T),s.find(i.hours).text(m),s.find(i.days).text(A)}}}})}(jQuery);