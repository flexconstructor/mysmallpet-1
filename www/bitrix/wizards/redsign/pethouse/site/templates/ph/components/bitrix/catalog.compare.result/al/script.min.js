BX.namespace("BX.Iblock.Catalog"),BX.Iblock.Catalog.CompareClass=function(){var e=function(e){this.wrapObjId=e,this.setRhythm(),BX.data(BX(this.wrapObjId),"cmpRes",this),$(window).on("resize",BX.debounce($.proxy(this.setRhythm,this),250)),BX.addCustomEvent(window,"OnCompareChange",BX.proxy(function(e){this.refreshed||this.MakeAjaxAction(window.location.href,e)},this))};return e.prototype.MakeAjaxAction=function(e,t){var i=BX(this.wrapObjId);$(i).rsToggleDark({progress:!0,progressTop:"100px"}),BX.ajax.post(e,{ajax_action:"Y",ajax_id:this.wrapObjId},BX.proxy(function(e){t||(this.refreshed=!0,BX.onCustomEvent("OnCompareChange",[!0])),$(i).rsToggleDark(),i.innerHTML=e,this.setRhythm(),delete appSLine.compareList,$(i).find(".js_element").length>0?($(".js_compare__total").html("("+$(i).find(".js_element").length+")"),appSLine.compareList={},$(i).find(".js_element").each(function(){var e=$(this).data("product-id");e>0&&(appSLine.compareList[e]=!0)})):(appSLine.compareList={},$(".js_compare__total").html("(0)")),appSLine.setProductItems(),this.refreshed=!1},this))},e.prototype.setRhythm=function(){var e=BX(this.wrapObjId),t=BX.findChild(e,{class:"cmp_page__table"},!0),s=BX.findChildren(t,{class:"compare__row"},!0);if(rowsName=BX.findChildren(BX.findChild(e,{class:"cmp_page__names"},!0),{class:"compare__row"},!0),rowsName&&rowsName.length>0&&s&&s.length){var a=-1,o={0:{items:1}};o[appSLine.grid.xs]={items:3},o[appSLine.grid.sm]={items:3},o[appSLine.grid.md]={items:3},o[appSLine.grid.lg]={items:4};for(var r in o)(r=Number(r))<=appSLine.pageWidth&&r>a&&(a=r);for(t.style.width=100*BX.findChildren(s[0],{tag:"td"},!0).length/o[a].items+"%",i=0;rowsName.length>i;i++)rowsName[i].style.height=s[i].style.height="auto",s[i].offsetHeight>rowsName[i].offsetHeight?rowsName[i].style.height=s[i].offsetHeight+"px":s[i].style.height=rowsName[i].offsetHeight+"px"}},e}();